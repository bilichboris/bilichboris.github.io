!function(){function t(t,n){return Math.floor(Math.random()*(n-t+1))+t}function n(t){return t[Math.floor(Math.random()*t.length)]}function e(){const t=["left","right","top","bottom"];return n(g?t.filter(t=>t!==g):t)}function i(t){const n=document.body.classList.contains("fixed-top-nav")?58:0,e=m,i=Math.max(e,window.innerWidth-t-m),o=n+m;return{minX:e,maxX:i,minY:o,maxY:Math.max(o,window.innerHeight-t-m)}}function o(n,e){const o=i(e),a=t(l,r);return"left"===n?{left:a,top:t(o.minY,o.maxY)}:"right"===n?{left:Math.max(o.minX,window.innerWidth-e-a),top:t(o.minY,o.maxY)}:"top"===n?{left:t(o.minX,o.maxX),top:Math.max(o.minY,a)}:{left:t(o.minX,o.maxX),top:Math.max(o.minY,window.innerHeight-e-a)}}function a(){clearTimeout(b),b=window.setTimeout(function(){c(!0)},t(f,h))}function c(t){if(!x)return;const n=Math.round(x.getBoundingClientRect().width)||66,i=e(),c=o(i,n);g=i,x.style.left=c.left+"px",x.style.top=c.top+"px",t&&(x.classList.add("is-escaping"),x.classList.add("show-caption"),window.setTimeout(function(){x.classList.remove("is-escaping")},p),window.setTimeout(function(){x.classList.remove("show-caption")},w)),a()}function u(){clearTimeout(y),y=window.setTimeout(function(){c(!1)},120)}function d(){document.hidden?clearTimeout(b):a()}function s(){const t=window.funnyIbexImagePath||"/assets/img/funny-ibex.png",n=document.createElement("button"),e=document.createElement("img");n.className="funny-ibex",n.type="button",n.setAttribute("aria-label","Escaping ibex"),n.title="Try to catch the ibex",e.src=t,e.alt="Funny ibex",n.appendChild(e),n.addEventListener("click",function(t){t.preventDefault(),c(!0)}),document.body.appendChild(n),x=n,c(!1),window.addEventListener("resize",u),document.addEventListener("visibilitychange",d)}const m=8,l=4,r=16,f=8e3,h=15e3,p=300,w=1800;let x=null,g=null,b=null,y=null;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()}();